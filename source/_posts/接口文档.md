---
title: 接口文档
date: 2020-01-03 14:26:40
tags:
categories: 文档

---

# 游戏研发接口文档

| 日期         | 版本 | 备注   |
| :----------- | :--- | :----- |
| 2020年1月3日 | 3.0  | 王振超 |



## 区服信息

- 描述：由游戏方提供用户查询游戏区服列表信息
- 地址：游戏方提供
- 请求：post
- 参数

| 参数     | 类型   | 是否为空 | 说明            |
| :------- | :----- | :------- | :-------------- |
| game     | string | 否       | 游戏标识        |
| serverId | string | 否       | 专服号，没有传0 |
| ts       | string | 否       | 时间戳          |
| sign     | string | 否       | 见签名规则      |

- 返回

  ```
  {
  	"errno": 1000, //状态码
  	"errmsg": "success",//状态说明
  	"data": [
                  {
                  "serverId":"123",	//专服号，没有则传0，字符串
                  "zoneId":"321",	//区服id，字符串
                  "zoneName":"雄霸天下",	//区服名称，字符串
                  "createTime":"1528167511",	//开服时间，时间戳（精确到秒）
                  ...
                  },{...},...
  		]
  } 
  
```
  
  

## 角色信息

- 描述：由游戏方提供角色查询信息
- 地址：游戏方提供
- 请求：post
- 参数

| 参数     | 类型   | 是否为空 | 说明            |
| :------- | :----- | :------- | :-------------- |
| game     | string | 否       | 游戏标识        |
| serverId | string | 否       | 专服号，没有传0 |
| zoneId   | string | 否       | 区服号          |
| uid      | string | 否       | 账号            |
| ts       | string | 否       | 时间戳          |
| sign     | string | 否       | 签名            |

- 返回

  ```
  {
  	"errno": 1000, //状态码
  	"errmsg": "success",//状态说明
  	"data": [
                  {
                  "serverId":"123",	//专服号，没有则传0，字符串
                  "zoneId":"321",	//区服id，字符串
                  "zoneName":"雄霸天下",	//区服名称，字符串
                  "roleId":"100001",	
                  "roleName":"wale",	
                  "roleLevel":"188",	
                  "groupName":"雄霸天下",	//所属公会（帮派）名称
  			   "groupPos":"帮主",	//所属公会（帮派）职位
                  "createTime":"1528167511",	//开服时间，时间戳（精确到秒）
                  },{...},...
  		]
  } 
  
  ```

  

## 透传字段接口

- 描述：由游戏方提供透传字段信息
- 地址：游戏方提供
- 请求：post
- 参数

| 参数       | 类型   | 是否为空 | 说明             |
| :--------- | :----- | :------- | :--------------- |
| game       | string | 否       | 游戏标识         |
| userId     | string | 否       | 用户Id           |
| roleId     | string | 否       | 角色Id           |
| serverCode | string | 否       | 专服号，没有传0  |
| goodsId    | string | 否       | 商品Id           |
| amount     | string | 否       | 金额（人民币分） |
| ip         | string | 否       | ip               |
| timestamp  | string | 否       | 时间戳           |
| sign       | string | 否       | 签名             |

- 返回

  ```
  {
  	"errno":1000,//状态码
  	"errmsg":"success",//状态说明
  	"data":{"orderId":"983271"}
  }   
  
  ```

  





## 在线用户

- 描述：提供游戏在线用户信息查询
- 地址：游戏方提供
- 请求：post
- 参数

| 参数     | 类型   | 是否为空 | 说明            |
| :------- | :----- | :------- | :-------------- |
| game     | string | 否       | 游戏标识        |
| serverId | string | 否       | 专服号，没有传0 |
| ts       | string | 否       | 时间戳          |
| sign     | string | 否       | 见签名规则      |

- 返回

  ```
  {
  	"errno": 1000,
  	"errmsg": "success",
  	"data": [{
                  "ts": "1528167511",
                  "serverId": "10000",
                  "zoneId":"100001",
                  "zoneName": "qufu1",
                  "olNum": "89"
                  }, {
                  "ts": "1528167511",
                  "serverId": "10000",
                  "zoneId":"100002"
                  "zoneName": "qufu2",
                  "olNum": "5"
              }]
  }
  
  ```

  

## 签名规则

- 描述：将所有请求参数按照参数键名升序排序，再按照顺序以$key1=$value2&$key2=$value2&...的格式拼接所有参数（sign除外），最后再拼接上麟游提供的游戏参数中的signKey进行md5。详情见方法实例

  ```
  public  function getSign($signArr = array(), $signKey)
  {           
      ksort($signArr);                                         
      $params = array();                               
      foreach ($signArr as $key => $value)             
      {                                                
          if(in_array($key, array("sign")))            
          {                                            
              continue;                                
          }                                            
          $params[] = $key.'='.$value;                          
      }                                                
      $signStr = implode("&", $params) .$signKey;        
      return strtoupper(md5($signStr));                
  }       
  
  ```

  



